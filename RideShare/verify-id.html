<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ID Verification - RideShare Local</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/RideShare-style/base-style.css">
    <link rel="stylesheet" href="/RideShare-style/verify-id.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <a href="home.html" class="logo">
                    <img src="/RideShare/imge/logo.png" alt="RideShare Local" class="logo-image">
                    <span class="logo-text">RideShare Local</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- Auth Alert (shown when not logged in) -->
    <div id="authAlert" class="auth-alert" style="display: none;">
        <div class="auth-alert-content">
            <i class="fas fa-exclamation-triangle"></i>
            <div>
                <h3>Authentication Required</h3>
                <p>Please login to verify your ID. Redirecting to login page...</p>
            </div>
        </div>
    </div>

    <!-- Verification Section -->
    <section class="verification-section">
        <div class="container">
            <div class="verification-container">
                <!-- Enhanced Progress Steps -->
                <div class="verification-progress">
                    <div class="progress-step completed">
                        <div class="step-circle">
                            <div class="step-icon">
                                <i class="fas fa-check"></i>
                            </div>
                        </div>
                        <div class="step-info">
                            <span class="step-label">Account Created</span>
                            <span class="step-status">âœ“ Completed</span>
                        </div>
                    </div>
                    
                    <div class="progress-line active"></div>
                    
                    <div class="progress-step active">
                        <div class="step-circle">
                            <div class="step-icon">
                                <i class="fas fa-id-card"></i>
                            </div>
                        </div>
                        <div class="step-info">
                            <span class="step-label">ID Verification</span>
                            <span class="step-status">In Progress</span>
                        </div>
                    </div>
                    
                    <div class="progress-line"></div>
                    
                    <div class="progress-step">
                        <div class="step-circle">
                            <div class="step-icon">
                                <span class="step-number">3</span>
                            </div>
                        </div>
                        <div class="step-info">
                            <span class="step-label">Complete</span>
                            <span class="step-status">Pending</span>
                        </div>
                    </div>
                </div>

                <!-- Verification Form -->
                <div class="verification-card">
                    <div class="card-header">
                        <i class="fas fa-id-card header-icon"></i>
                        <h2>Verify Your Identity</h2>
                        <p>To ensure platform security, please upload your government-issued ID</p>
                    </div>

                    <form id="verificationForm" class="verification-form">
                        <!-- ID Type Selection -->
                        <div class="form-group">
                            <label for="idType">Select ID Type</label>
                            <select id="idType" name="idType" required>
                                <option value="">Choose ID type</option>
                                <option value="national-id">National ID Card</option>
                                <option value="passport">Passport</option>
                                <option value="driving-license">Driving License</option>
                            </select>
                        </div>

                        <!-- ID Front Upload -->
                        <div class="form-group">
                            <label>Front of ID</label>
                            <div class="upload-area" id="frontUploadArea">
                                <input type="file" id="idFront" accept="image/*" hidden>
                                <div class="upload-content">
                                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                                    <p>Click to upload or drag and drop</p>
                                    <small>JPG, PNG or PDF (Max 5MB)</small>
                                </div>
                                <div class="upload-preview" id="frontPreview"></div>
                            </div>
                        </div>

                        <!-- ID Back Upload -->
                        <div class="form-group">
                            <label>Back of ID</label>
                            <div class="upload-area" id="backUploadArea">
                                <input type="file" id="idBack" accept="image/*" hidden>
                                <div class="upload-content">
                                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                                    <p>Click to upload or drag and drop</p>
                                    <small>JPG, PNG or PDF (Max 5MB)</small>
                                </div>
                                <div class="upload-preview" id="backPreview"></div>
                            </div>
                        </div>

                        <!-- Selfie with ID Upload -->
                        <div class="form-group">
                            <label>Selfie Holding ID</label>
                            <div class="upload-area" id="selfieUploadArea">
                                <input type="file" id="selfieWithId" accept="image/*" hidden>
                                <div class="upload-content">
                                    <i class="fas fa-camera upload-icon"></i>
                                    <p>Take or upload a selfie holding your ID</p>
                                    <small>Make sure your face and ID are clearly visible</small>
                                </div>
                                <div class="upload-preview" id="selfiePreview"></div>
                            </div>
                        </div>

                        <!-- Driving License (Optional) -->
                        <div class="form-group" id="licenseGroup" style="display: none;">
                            <label>Driving License (Optional)</label>
                            <div class="upload-area" id="licenseUploadArea">
                                <input type="file" id="drivingLicense" accept="image/*" hidden>
                                <div class="upload-content">
                                    <i class="fas fa-id-card upload-icon"></i>
                                    <p>Upload driving license if available</p>
                                    <small>Required for vehicle listing</small>
                                </div>
                                <div class="upload-preview" id="licensePreview"></div>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div class="upload-progress-container" style="display: none;">
                            <div class="upload-progress-bar">
                                <div class="upload-progress-fill"></div>
                            </div>
                            <p class="upload-status">Uploading documents...</p>
                        </div>

                        <!-- Guidelines -->
                        <div class="verification-guidelines">
                            <h4><i class="fas fa-info-circle"></i> Guidelines for ID Verification</h4>
                            <ul>
                                <li>Ensure all text on the ID is clearly readable</li>
                                <li>ID should be valid and not expired</li>
                                <li>Photos should be well-lit without glare</li>
                                <li>Your face should be clearly visible in the selfie</li>
                                <li>Documents will be reviewed within 24-48 hours</li>
                            </ul>
                        </div>

                        <!-- Action Buttons -->
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="skipVerification()">
                                <i class="fas fa-clock"></i>
                                Skip for Now
                            </button>
                            <button type="submit" class="btn btn-primary" id="submitVerification">
                                <i class="fas fa-check-circle"></i>
                                Submit for Verification
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Security Notice -->
                <div class="security-notice">
                    <i class="fas fa-shield-alt"></i>
                    <div>
                        <h4>Your Privacy is Protected</h4>
                        <p>All documents are encrypted and stored securely. We only use them for verification purposes.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Success Modal -->
    <div id="successModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-icon success">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3>Verification Submitted!</h3>
            <p>Your documents have been submitted successfully. We'll review them within 24-48 hours and notify you via email.</p>
            <button class="btn btn-primary" onclick="completeVerification()">
                Continue to Dashboard
            </button>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

    <!-- Firebase Configuration and Services -->
    <script src="/RideShare-js/firebase-config.js"></script>
    <script src="/RideShare-js/firebase-database.js"></script>
    <script src="/RideShare-js/firebase-auth.js"></script>
    <script src="/RideShare-js/firebase-storage.js"></script>
    <script src="/RideShare-js/verify-id.js"></script>
</body>
</html>